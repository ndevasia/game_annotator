<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Note Annotation</title>
  <!-- Link to external stylesheet -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="annotation-ui">
    <textarea id="note" placeholder="Type your annotation..."></textarea>
    <button class = "button-small" onclick="saveNote()">Save</button>
  </div>

  <script>
    const { ipcRenderer } = require('electron');

    function saveNote() {
      const note = document.getElementById('note').value;
      const timestamp = Date.now();
      ipcRenderer.send('save-annotation', { note, timestamp });
      document.getElementById('note').value = '';
      ipcRenderer.send('hide-overlay');
    }

    ipcRenderer.on('emoji-reaction', (event, emoji) => {
      // Hide annotation UI
      const annotationUI = document.getElementById('annotation-ui');
      if (annotationUI) annotationUI.style.display = 'none';

      // Show emoji reaction on overlay
      showEmojiReaction(emoji);
    });
    ipcRenderer.on('show-annotation-ui', () => {
      const annotationUI = document.getElementById('annotation-ui');
      if (annotationUI) annotationUI.style.display = 'flex';
    });

    ipcRenderer.on('emoji-reaction', (event, emoji) => {
      // Send emoji to separate emoji window
      ipcRenderer.send('show-emoji', emoji);
    });
  </script>
</body>
</html>
